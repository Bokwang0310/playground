# 함수형 프로그래밍

> 이 글에 등장하는 예제들은 ES6+의 문법을 사용하고 있습니다. [W3C ES6](https://www.w3schools.com/js/js_es6.asp)

**함수형 프로그래밍**은 객체지향 프로그래밍과 마찬가지로 프로그래밍 **패러다임**의 한 종류입니다.

객체 지향 프로그래밍이라는 패러다임에 캡슐화, 상속, 다형성과 같은 특징들이 있었던 것처럼 함수형 프로그래밍도 마찬가지로 특징들이 있습니다.

- 선언형
- 일급 함수
- 순수 함수 (참조 투명성)
- 불변
- ...

이외에도 여러 가지 특징이 있지만 이번에는 이 4가지에 대해서 집중적으로 알아보도록 하겠습니다.

## 선언형

> 명령형 코드는 구체적으로 **어떻게** 그 일을 할 것이냐를 기술하는 방식인데요, 이것들을 **선언적**으로 기술하는 게 함수형 프로그래밍입니다. [함수형 프로그래밍과 ES6+](https://youtu.be/4sO0aWTd3yc)

선언형 프로그래밍은 쓸 내용이 상당해서 [외부 파일](Declarative.md)로 분리했습니다.

## 일급 함수 (일급 객체로서의 함수)

> ... 보통 함수에 매개변수로 넘기기, 수정하기, 변수에 대입하기와 같은 연산을 지원할 때 일급 객체라고 한다. [위키피디아](https://ko.wikipedia.org/wiki/%EC%9D%BC%EA%B8%89_%EA%B0%9D%EC%B2%B4)

함수형 프로그래밍 언어에서 함수는 다음 3가지 조건을 만족시키는 **일급 객체**입니다.

- 변수에 할당 가능해야 한다.
- 함수의 인자로 사용될 수 있어야 한다.
- 함수의 반환값으로 사용될 수 있어야 한다.

위 3가지 조건을 한 문장으로 정리한다면 다음과 같습니다.

> 함수도 값이다.

함수가 값이기 때문에 변수에 할당할 수도, 함수의 인자로 넘길 수도, 함수가 반환할 수도 있는 것이죠.

자바스크립트는 이 3가지 조건을 다 지원하기 때문에 *자바스크립트에서의 함수는 일급 객체*라고 볼 수 있습니다.

```js
// 함수를 변수에 할당한다
const add = (a, b) => a + b;

// 함수의 인자로 함수를 넘긴다
const stopInterval = setInterval(() => {
  console.log("1초가 지났어!");
}, 1000);

// 함수의 반환값으로 함수를 받는다
stopInterval();
```

그래서 함수가 일급 객체라는 게 뭐 어떻다는 걸까요?

### 고차 함수

함수가 일급 객체이기 때문에 할 수 있는 것은 **고차 함수**를 만드는 것입니다.

고차 함수란 하나 이상의 함수를 인수로 취하거나 함수를 결과로 반환하는 함수를 말합니다.

따라서, 위 예제 코드에서 봤던 `setInterval`이라는 함수는 인자로 함수를 받기도 하고 함수를 리턴하기도 하므로 고차 함수라고 볼 수 있습니다.

자바스크립트에서 고차 함수가 사용되는 예시를 더 보도록 하겠습니다.

```js
const arr = [1, 2, 3, 4, 5];

// 함수를 인자로 받는 고차 함수
console.log(arr.filter((a) => a % 2)); // [1, 3, 5]
document.body.addEventListener("click", () => {
  console.log("Clicked!");
});

// 함수를 반환하는 고차 함수
function sayAnything(msg) {
  return (msg) => console.log(msg);
}

const sayHello = sayAnything("Hello?");
sayHello(); // "Hello?"
```

## 순수 함수 (참조 투명성)

순수 함수라는 말은 말 그대로 함수가 순수하다는 뜻입니다. 함수가 순수하다는 것은 무엇일까요? 코드를 봅시다.

```js
const pureAdd = (a, b) => a + b;

let data = 10;
const impureAdd = (a) => a + data;
```

`pureAdd` 함수는 함수의 매개변수 외에는 아무것도 참조하지 않기 때문에 같은 인자에 대해 항상 같은 함숫값을 보장해 줍니다.

```js
console.log(pureAdd(1, 2)); // 3
console.log(pureAdd(1, 2)); // 3
console.log(pureAdd(1, 2)); // 3
```

하지만 `impureAdd`는 매개변수 외에 함수 바깥에 있는 값을 참조하고 있기 때문에 함수의 인자로 같은 값을 넣더라도 계속해서 같은 값을 기대할 수 없습니다.

```js
console.log(impureAdd(1)); // 11
data = 1212;
console.log(impureAdd(1)); // 1213
data = "critical!";
console.log(impureAdd(1)); // "critical!1"
```

함수의 매개 변수 만을 참조하더라도 다음과 같은 상황은 순수 함수가 아닙니다.

```js
function impureAdd2(a, b) {
  console.log("Can I log anything?");
  return a + b;
}

console.log(impureAdd2(1, 2)); // 3
console.log(impureAdd2(1, 2)); // 3
console.log(impureAdd2(1, 2)); // 3
```

> ✋ 저기요, 동일 인자에 동일 값을 반환하는데요?

함수가 순수하다는 말은 단순히 매개 변수에만 의존하여 동일한 함숫값을 낸다는 것뿐만이 아니라 **외부 세계에 영향을 주지 않는/받지 않는 함수**라는 뜻입니다.

그리고 외부 세계에 대한 영향을 **사이드 이펙트(Side Effect)** 라고도 부릅니다.

위 예제에서는 `console.log`를 통해 외부 세계에 영향을 주기 때문에 순수하다고 볼 수 없습니다.

> ✋✋ 저기요; 그럼 외부 세계에 영향을 주지 않는 프로그램만 만들라는 건가요?

물론 프로그램에서 모든 함수를 순수하게 만들 수는 없습니다. 하지만 최대한 순수할 수 있게 만들 수 있는 것은 순수하게 만들고 그것들을 순수하지 않은 함수와는 분리하여 최대한 예측할 수 있는 값을 만들어내기 위한다는 의미를 가지고 있습니다.

## 불변

불변(Immutability)이란 변하지 않는다는 뜻을 가지는 단어입니다. 이와 반대되는 말은 가변(Mutability)이 있습니다.

https://front-end.me/javascript/functional-programming-1/
